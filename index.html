<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>태양광 에너지 - 친환경 에너지의 미래</title>
   
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
   
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        /* 로딩 스피너 */
        .loader { border: 4px solid #f3f3f3; border-radius: 50%; border-top: 4px solid #3498db; width: 30px; height: 30px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50 relative">

    <!-- Navigation -->
    <nav id="navbar" class="fixed top-0 w-full z-50 transition-all duration-300 bg-transparent text-white">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center gap-2 text-2xl font-bold tracking-tighter">
                <i class="fa-solid fa-sun text-yellow-400 text-3xl"></i>
                <span class="logo-text">SunEnergy</span>
            </a>
            <div class="hidden md:flex space-x-8 text-lg font-medium items-center nav-links">
                <a href="#about" class="hover:text-yellow-400 transition">회사소개</a>
                <a href="#future" class="hover:text-yellow-400 transition">태양광의 미래</a>
                <a href="#projects" class="hover:text-yellow-400 transition">시공현황</a>
                <a href="#contact" class="hover:text-yellow-400 transition">문의하기</a>
            </div>
            <div class="flex items-center gap-4">
                <div class="relative hidden md:block">
                    <button id="plusBtn" class="w-10 h-10 rounded-full border border-current flex items-center justify-center hover:bg-white hover:text-black transition focus:outline-none">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                    <div id="dropdownMenu" class="absolute right-0 mt-2 w-48 bg-white text-gray-800 rounded-lg shadow-xl py-2 hidden opacity-0 transition-opacity duration-300 transform origin-top-right">
                        <a href="#" class="block px-4 py-2 hover:bg-gray-100">로그인</a>
                        <a href="#contact" onclick="switchTab('my-inquiry')" class="block px-4 py-2 hover:bg-gray-100">내문의글</a>
                        <a href="#" class="block px-4 py-2 hover:bg-gray-100">한/영 (Language)</a>
                        <a href="#" class="block px-4 py-2 hover:bg-gray-100">회사사이트</a>
                    </div>
                </div>
                <button id="burgerBtn" class="md:hidden text-2xl focus:outline-none"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    </nav>

    <!-- Mobile Sidebar -->
    <div id="mobileMenu" class="fixed inset-0 z-[60] pointer-events-none">
        <div id="mobileOverlay" class="absolute inset-0 bg-black bg-opacity-50 opacity-0 transition-opacity duration-300 pointer-events-auto hidden"></div>
        <div id="sidebar" class="absolute right-0 top-0 h-full w-64 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 pointer-events-auto flex flex-col">
            <div class="p-5 flex justify-end">
                <button id="closeSidebar" class="text-2xl text-gray-600"><i class="fa-solid fa-times"></i></button>
            </div>
            <div class="flex flex-col px-6 gap-6 text-lg font-medium text-gray-800">
                <a href="#about" class="hover:text-blue-600 mobile-link">회사소개</a>
                <a href="#future" class="hover:text-blue-600 mobile-link">태양광의 미래</a>
                <a href="#projects" class="hover:text-blue-600 mobile-link">시공현황</a>
                <a href="#contact" class="hover:text-blue-600 mobile-link">문의하기</a>
                <a href="#contact" onclick="switchTab('my-inquiry')" class="hover:text-blue-600 mobile-link">내문의글</a>
            </div>
        </div>
    </div>

    <!-- 1. 회사소개 -->
    <section id="about" class="relative w-full h-[33vh] min-h-[300px] flex items-center justify-center overflow-hidden">
        <img src="https://images.unsplash.com/photo-1509391366360-2e959784a276?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" alt="Nature Solar" class="absolute inset-0 w-full h-full object-cover z-0">
        <div class="absolute inset-0 bg-black bg-opacity-40 z-10"></div>
        <div class="relative z-20 text-center text-white px-4">
            <h1 class="text-3xl md:text-5xl font-bold mb-4 drop-shadow-lg leading-tight">친환경 에너지의 가치를 만드는 기업</h1>
            <p class="text-base md:text-xl font-light opacity-90 max-w-2xl mx-auto">저희 회사는 태양광 발전장비 시공 및 관리 인프라를 만드는 회사입니다.</p>
        </div>
    </section>

    <!-- 2. 태양광의 미래 -->
    <section id="future" class="py-16 bg-white">
        <div class="container mx-auto px-6 text-center">
            <div class="inline-block p-3 rounded-full bg-blue-50 text-blue-600 mb-4"><i class="fa-solid fa-earth-americas text-2xl"></i></div>
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-8">태양광의 미래</h2>
            <p class="text-gray-600 leading-relaxed max-w-3xl mx-auto text-lg whitespace-pre-line">세계적인 기후위기에 직면하고, 각국의 친환경 에너지의 중요성이 대두되는 가운데...</p>
        </div>
    </section>

    <!-- 3. 시공현황 -->
    <section id="projects" class="py-16 bg-gray-50">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">시공현황</h2>
            <div id="grid-container" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
        </div>
    </section>

    <!-- Modal Structure -->
    <div id="projectModal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black bg-opacity-80 backdrop-blur-sm" id="modalBackdrop"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl overflow-hidden relative flex flex-col max-h-[90vh]">
                <div class="p-4 border-b flex justify-between items-center bg-gray-50">
                    <h3 id="modalTitle" class="text-xl font-bold text-gray-800 truncate pr-4"></h3>
                    <button id="closeModal"><i class="fa-solid fa-times text-2xl"></i></button>
                </div>
                <div class="flex-1 overflow-y-auto bg-black relative">
                    <div class="relative w-full h-64 md:h-96 flex items-center justify-center">
                        <img id="modalImage" src="" class="max-w-full max-h-full object-contain">
                        <button id="prevBtn" class="absolute left-4 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-80"><i class="fa-solid fa-chevron-left"></i></button>
                        <button id="nextBtn" class="absolute right-4 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-80"><i class="fa-solid fa-chevron-right"></i></button>
                        <div class="absolute bottom-4 right-4 bg-black bg-opacity-60 text-white px-3 py-1 rounded text-sm"><span id="currentCount"></span> / <span id="totalCount"></span></div>
                    </div>
                </div>
                <div class="p-6 bg-white">
                    <div class="text-sm text-gray-500 font-medium mb-4"><i class="fa-regular fa-calendar"></i> 시공일: <span id="modalDate"></span></div>
                    <p id="modalContent" class="text-lg leading-relaxed text-gray-700"></p>
                    <div class="mt-6 text-right"><button id="closeModalBtn" class="px-6 py-2 bg-gray-800 text-white rounded">닫기</button></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 4. 문의 하기 -->
    <section id="contact" class="py-16 bg-white">
        <div class="container mx-auto px-6 max-w-3xl">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">문의하기</h2>

            <div class="flex border-b border-gray-200 mb-8">
                <button class="flex-1 py-3 text-center font-medium text-blue-600 border-b-2 border-blue-600 transition tab-btn" data-target="form-section">문의하기</button>
                <button class="flex-1 py-3 text-center font-medium text-gray-500 hover:text-gray-700 transition tab-btn" data-target="my-inquiry">내문의 글</button>
            </div>

            <!-- Form -->
            <div id="form-section" class="tab-content fade-in">
                <form id="inquiryForm" class="space-y-6 bg-gray-50 p-8 rounded-lg shadow-sm border border-gray-100">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">제목</label>
                        <input type="text" name="title" placeholder="문의 제목을 입력하세요" class="w-full px-4 py-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">구분</label>
                        <select name="category" class="w-full px-4 py-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500" required>
                            <option value="">선택해주세요</option>
                            <option value="견적문의">견적문의</option>
                            <option value="건설현장시공">건설현장시공</option>
                            <option value="공장지붕시공">공장지붕시공</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">전화번호</label>
                            <input type="tel" name="phone" placeholder="010-0000-0000 (숫자만 입력)" class="w-full px-4 py-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">임시 비밀번호</label>
                            <input type="password" name="password" placeholder="비밀번호 4자리" maxlength="4" class="w-full px-4 py-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">내용</label>
                        <textarea name="content" rows="5" placeholder="문의하실 내용을 자세히 적어주세요" class="w-full px-4 py-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500 resize-none" required></textarea>
                    </div>
                   
                    <button type="submit" id="submitBtn" class="w-full bg-blue-600 text-white font-bold py-3 rounded-md hover:bg-blue-700 transition flex justify-center items-center gap-2">
                        <span>제출하기</span>
                        <div id="submitLoader" class="loader hidden w-5 h-5 border-2 border-white border-t-transparent"></div>
                    </button>
                </form>
            </div>

            <!-- Check Inquiry -->
            <div id="my-inquiry" class="tab-content hidden fade-in">
                <!-- Login -->
                <div id="inquiryLogin" class="bg-gray-50 p-8 rounded-lg border border-gray-100 max-w-md mx-auto">
                    <div class="text-center mb-6">
                        <div class="inline-block p-3 rounded-full bg-blue-50 text-blue-600 mb-2"><i class="fa-solid fa-lock text-xl"></i></div>
                        <h3 class="text-lg font-bold text-gray-800">내 문의글 조회</h3>
                        <p class="text-sm text-gray-500">Google Sheet에서 실시간으로 조회합니다.</p>
                    </div>
                    <form id="checkInquiryForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">전화번호</label>
                            <input type="tel" id="checkPhone" placeholder="010-0000-0000" class="w-full px-4 py-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">임시 비밀번호</label>
                            <input type="password" id="checkPw" placeholder="비밀번호 4자리" maxlength="4" class="w-full px-4 py-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <button type="submit" id="checkBtn" class="w-full bg-gray-800 text-white font-bold py-3 rounded-md hover:bg-gray-900 transition flex justify-center items-center gap-2">
                            <span>조회하기</span>
                            <div id="checkLoader" class="loader hidden w-5 h-5 border-2 border-white border-t-transparent"></div>
                        </button>
                    </form>
                </div>

                <!-- Result -->
                <div id="inquiryResult" class="hidden space-y-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-800">조회 결과</h3>
                        <button id="backToLogin" class="text-sm text-gray-500 hover:text-gray-800 underline">다시 조회</button>
                    </div>
                    <div id="resultList" class="space-y-4"></div>
                    <div id="noResult" class="hidden text-center py-8 text-gray-500 bg-gray-50 rounded-lg">문의 내역이 없습니다.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black text-white py-12">
        <div class="container mx-auto px-6 text-center space-y-2">
            <p class="text-gray-400 text-sm">© 2025 SunEnergy Corp. All rights reserved.</p>
        </div>
    </footer>

    <script>
        /*******************************************************
         * [중요] Google Apps Script 웹 앱 URL을 아래에 입력하세요.
         * 예: "https://script.google.com/macros/s/AKfycbx.../exec"
         *******************************************************/
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzscB9MzUjAzpURmWdbiQyunH2319-K1hAue6MlObPSHynyXm9JEQeplCmWK-ucwwGGhA/exec";

        /** 1. Data & Navigation Logic (기존과 동일) **/
        const projectsData = [
            {title: "김제시 공단 태양광 시공", content: "김제시 농공단지 공장지붕에 태양광패널 100kw급 인프라 시공현장입니다.", day: "2024-10-09", src: "https://images.unsplash.com/photo-1508514177221-188b1cf2f26f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "공주 주택가 단체문의 태양광 시공", content: "충남 공주 주택가 단지에 대규모 태양광패널 50kw급 인프라 시공현장입니다.", day: "2025-02-11", src: "https://images.unsplash.com/photo-1559302504-64aae6ca6b6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "부산 물류센터 지붕 시공", content: "부산항 인근 대형 물류센터 지붕 유휴부지 활용 태양광 발전소 구축.", day: "2024-11-20", src: "https://images.unsplash.com/photo-1611365892117-00ac5ef43c90?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "강원도 산간지역 에코 빌리지", content: "친환경 에코 빌리지 단지 내 가정용 태양광 설비 일괄 시공.", day: "2024-09-15", src: "https://images.unsplash.com/photo-1497435334941-8c899ee9e8e9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "대전 연구단지 주차장 태양광", content: "연구단지 내 야외 주차장 차양막 겸용 태양광 패널 설치.", day: "2025-01-05", src: "https://images.unsplash.com/photo-1545208942-e1c4340e5503?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "제주도 감귤농장 영농형 태양광", content: "농사와 발전사업을 병행하는 영농형 태양광 시스템 구축.", day: "2024-12-01", src: "https://images.unsplash.com/photo-1558449028-b53a39d100fc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "인천 산업단지 옥상 유휴부지", content: "산업단지 내 다수 기업 옥상 임대형 태양광 발전소 시공.", day: "2025-03-10", src: "https://images.unsplash.com/photo-1624397640148-949b1732bb0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "세종시 관공서 에너지 자립화", content: "공공기관 건물 에너지 자립률 제고를 위한 BIPV 시스템 도입.", day: "2024-08-22", src: "https://images.unsplash.com/photo-1592833159155-c62df1b65634?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"},
            {title: "경기도 전원주택 단지", content: "신규 조성되는 전원주택 단지 30세대 태양광 패널 보급 사업.", day: "2025-01-30", src: "https://images.unsplash.com/photo-1508514177221-188b1cf2f26f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"}
        ];

        // Navbar & Mobile Menu Logic
        const nav = document.getElementById('navbar');
        const plusBtn = document.getElementById('plusBtn');
        const dropdownMenu = document.getElementById('dropdownMenu');
        const burgerBtn = document.getElementById('burgerBtn');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobileOverlay');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                nav.classList.remove('bg-transparent', 'text-white');
                nav.classList.add('bg-white/90', 'backdrop-blur-md', 'text-gray-800', 'shadow-sm');
                plusBtn.classList.remove('border-current'); plusBtn.classList.add('border-gray-300');
            } else {
                nav.classList.add('bg-transparent', 'text-white');
                nav.classList.remove('bg-white/90', 'backdrop-blur-md', 'text-gray-800', 'shadow-sm');
                plusBtn.classList.add('border-current'); plusBtn.classList.remove('border-gray-300');
            }
        });

        plusBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if(dropdownMenu.classList.contains('hidden')){ dropdownMenu.classList.remove('hidden'); setTimeout(()=>dropdownMenu.classList.remove('opacity-0'),10); }
            else { dropdownMenu.classList.add('opacity-0'); setTimeout(()=>dropdownMenu.classList.add('hidden'),300); }
        });
        window.addEventListener('click', () => { if(!dropdownMenu.classList.contains('hidden')){ dropdownMenu.classList.add('opacity-0'); setTimeout(()=>dropdownMenu.classList.add('hidden'),300); } });

        function toggleSidebar(show) {
            if (show) { mobileOverlay.classList.remove('hidden'); setTimeout(() => { mobileOverlay.classList.remove('opacity-0'); sidebar.classList.remove('translate-x-full'); }, 10); }
            else { sidebar.classList.add('translate-x-full'); mobileOverlay.classList.add('opacity-0'); setTimeout(() => mobileOverlay.classList.add('hidden'), 300); }
        }
        burgerBtn.addEventListener('click', () => toggleSidebar(true));
        document.getElementById('closeSidebar').addEventListener('click', () => toggleSidebar(false));
        mobileOverlay.addEventListener('click', () => toggleSidebar(false));
        document.querySelectorAll('.mobile-link').forEach(link => link.addEventListener('click', () => toggleSidebar(false)));

        // Grid & Modal Logic
        const gridContainer = document.getElementById('grid-container');
        projectsData.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = "bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition cursor-pointer group border border-gray-100";
            card.onclick = () => openModal(index);
            card.innerHTML = `<div class="h-48 overflow-hidden"><img src="${item.src}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500"></div><div class="p-5 flex flex-col justify-between h-32"><h3 class="font-bold text-lg text-gray-800 group-hover:text-blue-600 transition line-clamp-2">${item.title}</h3><div class="text-sm text-gray-500 mt-auto flex items-center gap-2"><i class="fa-regular fa-calendar"></i> ${item.day}</div></div>`;
            gridContainer.appendChild(card);
        });

        let currentModalIndex = 0;
        const modal = document.getElementById('projectModal');
        const modalImage = document.getElementById('modalImage');
        const modalTitle = document.getElementById('modalTitle');
        const modalDate = document.getElementById('modalDate');
        const modalContent = document.getElementById('modalContent');
        const currentCount = document.getElementById('currentCount');
        const totalCount = document.getElementById('totalCount');
        totalCount.textContent = projectsData.length;

        function updateModal(index) {
            const data = projectsData[index];
            modalImage.src = data.src; modalTitle.textContent = data.title; modalDate.textContent = data.day; modalContent.textContent = data.content; currentCount.textContent = index + 1;
        }
        function openModal(index) { currentModalIndex = index; updateModal(index); modal.classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
        function closeModal() { modal.classList.add('hidden'); document.body.style.overflow = ''; }
        document.getElementById('closeModal').addEventListener('click', closeModal);
        document.getElementById('closeModalBtn').addEventListener('click', closeModal);
        document.getElementById('modalBackdrop').addEventListener('click', closeModal);
        document.getElementById('prevBtn').addEventListener('click', (e) => { e.stopPropagation(); currentModalIndex = (currentModalIndex - 1 + projectsData.length) % projectsData.length; updateModal(currentModalIndex); });
        document.getElementById('nextBtn').addEventListener('click', (e) => { e.stopPropagation(); currentModalIndex = (currentModalIndex + 1) % projectsData.length; updateModal(currentModalIndex); });

        // Tab Logic
        const tabs = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => { t.classList.remove('text-blue-600', 'border-blue-600', 'border-b-2'); t.classList.add('text-gray-500'); });
                tab.classList.add('text-blue-600', 'border-blue-600', 'border-b-2'); tab.classList.remove('text-gray-500');
                tabContents.forEach(c => c.classList.add('hidden'));
                document.getElementById(tab.dataset.target).classList.remove('hidden');
            });
        });
        window.switchTab = (targetId) => document.querySelector(`.tab-btn[data-target="${targetId}"]`)?.click();


        /** * 2. Google Sheets Integration Logic
         * (fetch API를 사용하여 구글 스크립트로 데이터 전송 및 수신)
         **/
       
        const inquiryForm = document.getElementById('inquiryForm');
        const submitBtn = document.getElementById('submitBtn');
        const submitLoader = document.getElementById('submitLoader');

        // [POST] 문의글 저장
        inquiryForm.addEventListener('submit', (e) => {
            e.preventDefault();

            if (GOOGLE_SCRIPT_URL.includes("YOUR_")) {
                alert("스크립트 코드를 구글 앱스 스크립트에 배포하고 URL을 코드 상단에 입력해주세요.");
                return;
            }

            // 로딩 표시
            submitBtn.disabled = true;
            submitLoader.classList.remove('hidden');

            const formData = new FormData(inquiryForm);
            const data = {
                title: formData.get('title'),
                category: formData.get('category'),
                phone: formData.get('phone'),
                password: formData.get('password'),
                content: formData.get('content')
            };

            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors", // 구글 스크립트 CORS 우회 (response 확인 불가, 에러 안나면 성공으로 간주)
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            })
            .then(() => {
                alert("문의가 성공적으로 접수되었습니다.\n'내 문의글' 탭에서 확인하실 수 있습니다.");
                inquiryForm.reset();
            })
            .catch(error => {
                console.error("Error:", error);
                alert("전송 중 오류가 발생했습니다.");
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitLoader.classList.add('hidden');
            });
        });

        // [GET] 내 문의글 조회
        const checkInquiryForm = document.getElementById('checkInquiryForm');
        const checkBtn = document.getElementById('checkBtn');
        const checkLoader = document.getElementById('checkLoader');
        const inquiryLogin = document.getElementById('inquiryLogin');
        const inquiryResult = document.getElementById('inquiryResult');
        const resultList = document.getElementById('resultList');
        const noResult = document.getElementById('noResult');

        checkInquiryForm.addEventListener('submit', (e) => {
            e.preventDefault();
           
            if (GOOGLE_SCRIPT_URL.includes("YOUR_")) {
                alert("스크립트 코드를 구글 앱스 스크립트에 배포하고 URL을 코드 상단에 입력해주세요.");
                return;
            }

            const phone = document.getElementById('checkPhone').value;
            const pw = document.getElementById('checkPw').value;

            checkBtn.disabled = true;
            checkLoader.classList.remove('hidden');

            // GET 요청은 URL 쿼리 파라미터로 보냄
            const queryUrl = `${GOOGLE_SCRIPT_URL}?phone=${encodeURIComponent(phone)}&password=${encodeURIComponent(pw)}`;

            fetch(queryUrl) // GET은 기본적으로 cors 처리가 잘 됨 (단, 앱스스크립트가 JSON을 리턴해야 함)
            .then(response => response.json())
            .then(data => {
                renderResults(data);
                inquiryLogin.classList.add('hidden');
                inquiryResult.classList.remove('hidden');
            })
            .catch(error => {
                console.error("Error:", error);
                alert("조회 중 오류가 발생했습니다. (네트워크 또는 스크립트 설정 확인)");
            })
            .finally(() => {
                checkBtn.disabled = false;
                checkLoader.classList.add('hidden');
            });
        });

        function renderResults(items) {
            resultList.innerHTML = '';
            if (!items || items.length === 0) {
                noResult.classList.remove('hidden');
            } else {
                noResult.classList.add('hidden');
                items.forEach(item => {
                    const div = document.createElement('div');
                    div.className = "bg-white p-4 rounded border border-gray-200 shadow-sm";
                    div.innerHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <span class="bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded">${item.category}</span>
                            <span class="text-gray-400 text-sm">${item.date}</span>
                        </div>
                        <h4 class="font-bold text-gray-800 mb-1">${item.title}</h4>
                        <p class="text-gray-600 text-sm line-clamp-2">${item.content}</p>
                    `;
                    resultList.appendChild(div);
                });
            }
        }

        document.getElementById('backToLogin').addEventListener('click', () => {
            inquiryResult.classList.add('hidden');
            inquiryLogin.classList.remove('hidden');
            checkInquiryForm.reset();
        });

    </script>
</body>
</html>
